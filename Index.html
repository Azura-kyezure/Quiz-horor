<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Horror RPG Ultimate</title>

<style>
body {
    margin: 0;
    background: black;
    color: white;
    font-family: monospace;
    overflow: hidden;
    text-align: center;
}

.container {
    max-width: 750px;
    margin: auto;
    padding: 20px;
    margin-top: 30px;
}

button {
    width: 100%;
    margin: 8px 0;
    padding: 12px;
    background: darkred;
    border: none;
    color: white;
    cursor: pointer;
    transition: 0.2s;
}

button:hover {
    background: crimson;
}

#stats {
    margin-bottom: 10px;
}

#jumpscare {
    position: fixed;
    top:0; left:0;
    width:100%;
    height:100%;
    background:red;
    display:none;
    justify-content:center;
    align-items:center;
    font-size:60px;
    z-index:999;
    animation: shake 0.2s infinite;
}

@keyframes shake {
    0%{transform:translate(0,0);}
    25%{transform:translate(-10px,5px);}
    50%{transform:translate(10px,-5px);}
    75%{transform:translate(-5px,10px);}
    100%{transform:translate(0,0);}
}

.flicker {
    animation: flicker 0.15s infinite;
}

@keyframes flicker {
    0%{opacity:1;}
    50%{opacity:0.7;}
    100%{opacity:1;}
}
</style>
</head>
<body>

<div id="jumpscare">üò±</div>

<div class="container">
<h1>‚ò† HORROR RPG ‚ò†</h1>

<div id="stats"></div>
<div id="story"></div>
<div id="choices"></div>
<div id="ending"></div>

</div>

<script>

let lives = 3;
let sanity = 100;
let inventory = [];
let sceneCount = 0;
let fear = 0;
let bossAppeared = false;

const items = ["Senter","Pisau","Kunci","Jimat"];

function updateStats(){
document.getElementById("stats").innerHTML =
"‚ù§Ô∏è Nyawa: "+lives+
" | üß† Sanity: "+sanity+
"<br>üéí Inventory: "+(inventory.length>0?inventory.join(", "):"Kosong");
}

function jumpscare(){
const j = document.getElementById("jumpscare");
j.style.display="flex";
setTimeout(()=>{j.style.display="none";},400);
}

function randomScene(){
if(sceneCount >= 100){
triggerBoss();
return;
}

sceneCount++;

let randomEvent = Math.random();

let storyText = "Kamu berjalan di koridor gelap... (Scene "+sceneCount+")";

let choices = [];

if(randomEvent < 0.3){
storyText = "Kamu menemukan benda di lantai...";
let item = items[Math.floor(Math.random()*items.length)];
choices.push({
text:"Ambil "+item,
action:()=>{ if(!inventory.includes(item)) inventory.push(item); next(); }
});
choices.push({
text:"Biarkan",
action:()=>{ sanity -=5; next(); }
});
}
else if(randomEvent < 0.6){
storyText = "Suara aneh terdengar sangat dekat...";
choices.push({
text:"Lari",
action:()=>{ lives--; sanity-=10; jumpscare(); next(); }
});
choices.push({
text:"Tetap tenang",
action:()=>{ sanity-=5; next(); }
});
}
else{
storyText = "Lorong bercabang dua.";
choices.push({
text:"Kiri",
action:()=>{ fear++; next(); }
});
choices.push({
text:"Kanan",
action:()=>{ fear+=2; next(); }
});
}

renderScene(storyText, choices);
}

function renderScene(text, choices){
document.getElementById("story").innerHTML="<p>"+text+"</p>";
const c = document.getElementById("choices");
c.innerHTML="";
choices.forEach(choice=>{
let b=document.createElement("button");
b.innerText=choice.text;
b.onclick=()=>{
choice.action();
};
c.appendChild(b);
});
updateStats();
}

function next(){
if(lives<=0 || sanity<=0){
endGame("Kamu tumbang dalam kegelapan...");
return;
}
randomScene();
}

function triggerBoss(){
if(bossAppeared) return;
bossAppeared=true;

let text="SOSOK BESAR muncul di depanmu... Ini akhir perjalananmu.";
let choices=[];

if(inventory.includes("Pisau")){
choices.push({
text:"Lawan dengan Pisau",
action:()=>{ generateEnding(1); }
});
}
if(inventory.includes("Jimat")){
choices.push({
text:"Gunakan Jimat",
action:()=>{ generateEnding(2); }
});
}

choices.push({
text:"Lari",
action:()=>{ generateEnding(3); }
});

renderScene(text, choices);
}

function generateEnding(type){
let endingNumber = ((fear + sanity + lives + type*7) % 50) + 1;
endGame("ENDING #"+endingNumber+
"<br><br>Takdirmu berakhir di jalur ke-"+endingNumber+".");
}

function endGame(text){
document.getElementById("story").innerHTML="";
document.getElementById("choices").innerHTML="";
document.getElementById("ending").innerHTML=
"<h2>"+text+"</h2><br><button onclick='restart()'>Main Lagi</button>";
}

function restart(){
lives=3;
sanity=100;
inventory=[];
sceneCount=0;
fear=0;
bossAppeared=false;
document.getElementById("ending").innerHTML="";
randomScene();
}

randomScene();

</script>
</body>
</html>
